设计原则：
单一职责原则、里氏替换原则、依赖倒置原则、接口隔
离原则、合成复用原则和最少知识原则。



单一职责原则（SRP）的职责被定义为“引起变化的原因”，就一个类而言，应该仅有一个引起它变化的原因。
SRP 原则体现为：一个对象（方法）只做一件事情。
一方面，如果随着需求的变化，有两个职责总是同时变化，那就不必分离他们。
另一方面，职责的变化轴线仅当它们确定会发生变化时才具有意义，即使两个职责已经被耦
合在一起，但它们还没有发生改变的征兆，那么也许没有必要主动分离它们，在代码需要重构的
时候再进行分离也不迟。
SRP 原则的优点是降低了单个类或者对象的复杂度，按照职责把对象分解成更小的粒度，
这有助于代码的复用，也有利于进行单元测试。当一个职责需要变更的时候，不会影响到其他
的职责。
SRP 原则也有一些缺点，最明显的是会增加编写代码的复杂度。

最少知识原则（LKP）说的是一个软件实体应当尽可能少地与其他实体发生相互作用。
外观模式的作用是对客户屏蔽一组子系统的复杂性。外观模式对客户提供一个简单易用的高层接口，高层接口会把客户的请求转发给子系统来完成具体的功能实现。

开放封闭原则：

让程序尽量遵守开放封闭原则的规律，最明显的就是找出程序中将要发生变化的地方，然后把变化封装起来。即封装对象的多态性。
放置挂钩（hook）也是分离变化的一种方式。我们在程序有可能发生变化的地方放置一个挂钩，挂钩的返回结果决定了程序的下一步走向。
回调函数是一种特殊的挂钩。我们可以把一部分易于变化的逻辑封装在回调函数里，然后把回调函数当作参数传入一个稳定和封闭的函数中。当回调函数被执行的时候，程序就可以因为回调函数的内部逻辑不同，而产生不同的结果。



接口和面向接口编程：

通过主动暴露的接口来通信，可以隐藏软件系统内部的工作细节。

第二种接口是一些语言提供的关键字，比如Java 的interface。interface 关键字可以产生一个完全抽象的类。这个完全抽象的类用来表示一种契约，专门负责建立类与类之间的联系。

接口是对象能响应的请求的集合。

静态类型语言通常设计为可以“向上转型”，通过向上转型，对象的具体类型被隐藏在“超类型”身后。建立一些契约。不关注对象的具体类型，而仅仅针对超类型中的“契约方法”来编写程序，可以产生可靠性高的程序，也可以极大地减少子系统实现之间的相互依赖关系。

从过程上来看，“面向接口编程”其实是“面向超类型编程”

“面向接口编程”也可以看成面向抽象编程，即针对超类型中的 abstract 方法编程，接口
在这里被当成 abstract 方法中约定的契约行为。

接口检查： 鸭子模型。

代码重构：

如果在函数中有一段代码可以被独立出来，那我们最好把这些代码放进另外一个独立的函数中。

如果一个函数体内有一些条件分支语句，而这些条件分支语句内部散布了一些重复的代码，那么就有必要进行合并去重工作。

把条件分支语句提炼成函数 。

合理使用循环。

提前让函数退出代替嵌套条件分支。

传递对象参数代替过长的参数列表。

尽量减少参数数量。

少用三目运算符。

合理使用链式调用 。

分解大型类。

用 return 退出多重循环 。
