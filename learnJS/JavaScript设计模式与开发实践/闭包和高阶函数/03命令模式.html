<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>命令模式演示</title>
</head>
<body>
<button id="execute">打开电视机</button>
<button id="undo">关闭电视机</button>
//第一种方式
<!--<script>-->
<!--    var Tv = {-->
<!--        open: function() {-->
<!--            console.log('打开电视机')-->
<!--        },-->
<!--        close: function() {-->
<!--            console.log('关闭电视机')-->
<!--        }-->
<!--    }-->

<!--    var OpenTvCommand = function(receiver) {-->
<!--        this.receiver = receiver-->
<!--    }-->

<!--    OpenTvCommand.prototype.execute = function() {-->
<!--        this.receiver.open()-->
<!--    }-->

<!--    OpenTvCommand.prototype.undo = function() {-->
<!--        this.receiver.close()-->
<!--    }-->

<!--    var setCommand = function(command) {-->
<!--        document.getElementById('execute').onclick = function() {-->
<!--            command.execute()-->
<!--        }-->
<!--        document.getElementById('undo').onclick = function() {-->
<!--            command.undo()-->
<!--        }-->
<!--    }-->

<!--    setCommand(new OpenTvCommand(Tv))-->
<!--</script>-->

//第二种：闭包方式
<script>
    var Tv = {
        open: function() {
            console.log('打开电视机')
        },
        close: function() {
            console.log('关闭电视机')
        }
    }

    var createCommand = function(receiver) {
        var execute = function() {
            return receiver.open()
        }

        var undo = function() {
            return receiver.close()
        }

        return {
            execute,
            undo,
        }
    }

    var setCommand = function(command) {
        document.getElementById('execute').onclick = function() {
            command.execute()
        }
        document.getElementById('undo').onclick = function() {
            command.undo()
        }
    }
    setCommand(createCommand(Tv))
</script>
</body>
</html>